var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P=P||Promise)(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})},__generator=this&&this.__generator||function(thisArg,body){var f,y,t,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},g={next:verb(0),throw:verb(1),return:verb(2)};return"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){var op=[n,v];if(f)throw new TypeError("Generator is already executing.");for(;_=g&&op[g=0]?0:_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,(op=t?[2&op[0],t.value]:op)[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=0<(t=_.trys).length&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3]))_.label=op[1];else if(6===op[0]&&_.label<t[1])_.label=t[1],t=op;else{if(!(t&&_.label<t[2])){t[2]&&_.ops.pop(),_.trys.pop();continue}_.label=t[2],_.ops.push(op)}}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}},__read=this&&this.__read||function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||0<n--)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},__values=this&&this.__values||function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return{value:(o=o&&i>=o.length?void 0:o)&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},__spreadArray=this&&this.__spreadArray||function(to,from,pack){if(pack||2===arguments.length)for(var ar,i=0,l=from.length;i<l;i++)!ar&&i in from||((ar=ar||Array.prototype.slice.call(from,0,i))[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))};import React from"react";import validator,{isNumeric}from"validator";import{currencyMasker,mask}from"./util";import{isCnpj,isCpf}from"./common-validators";var useReloader=function(){var _a=__read(React.useState(1),2),setReload=(_a[0],_a[1]);return{reload:function(){return setReload(function(prevState){return prevState+1})}}},DatasetValidation=["validators"],DatasetActions=["reload-component","reloadComponent"],DatasetConditional=["equals","greaterOrEqual","greaterThan","lessOrEqual","lessThan","notEquals"],DatasetCurrency=["prefix","decimalSeparator","groupSeparator","precision"],ReactInputStateConfig={},currencyFormat=function(value,prefix,precision,decimalSeparator,groupSeparator){return value="".concat(value=null==value?"0":value).replace(/[^0-9]+/g,""),currencyMasker(value,{prefix:prefix,decimalSeparator:decimalSeparator,groupSeparator:groupSeparator,precision:precision})},ReactInputState=(()=>{function ReactInputState(reloader,config){this.validation={},this.fields={},this.radios={},this.errorCloseTimeout=0,this.root=null,this.fieldsChanged=0,this._config=config,this.state=config&&config.initialState?config.initialState:{},this._virtual=config&&config.virtualState?config.virtualState:{},this.reloader=reloader}return Object.defineProperty(ReactInputState.prototype,"values",{get:function(){var name_1,name_2,returnValues={};for(name_1 in this.state){var someKey;(name_1 in this.radios?(someKey=Object.keys(this.radios[name_1])[0],this.radios[name_1][someKey]):this.fields[name_1]).field.dataset.private||(returnValues[name_1]=this.state[name_1])}for(name_2 in this._virtual)this._virtual[name_2].private||(returnValues[name_2]=this._virtual[name_2].value);return __assign({},returnValues)},enumerable:!1,configurable:!0}),Object.defineProperty(ReactInputState.prototype,"privateValues",{get:function(){var name_3,returnValues={};for(name_3 in this.state)this.fields[name_3].field.dataset.private&&(returnValues[name_3]=this.state[name_3]);return __assign({},returnValues)},enumerable:!1,configurable:!0}),Object.defineProperty(ReactInputState.prototype,"virtualValues",{get:function(){var name_4,returnValues={};for(name_4 in this._virtual){this._virtual[name_4];returnValues[name_4]=this._virtual[name_4].value}return __assign({},returnValues)},enumerable:!1,configurable:!0}),Object.defineProperty(ReactInputState.prototype,"config",{get:function(){return __assign(__assign({},ReactInputStateConfig),this._config||{})},enumerable:!1,configurable:!0}),ReactInputState.prototype.setInitialState=function(initialState){for(var name_5 in initialState)this.setValue(name_5,initialState[name_5]);this.validateAll()},ReactInputState.prototype.setVirtualState=function(virtualState){this._virtual=__assign({},virtualState)},ReactInputState.prototype.value=function(name){return this.state[name]},ReactInputState.prototype.virtual=function(name){return null==(name=this._virtual[name])?void 0:name.value},ReactInputState.prototype.deleteVirtual=function(name,reloadComponent){function runVirtualDeletion(){var vName,newData={};for(vName in _this._virtual)vName!=name&&(newData[vName]=_this._virtual[vName]);_this._virtual=__assign({},newData),_this.reloader&&reloadComponent&&_this.reloader.reload()}var _this=this;void 0===reloadComponent&&(reloadComponent=!1);runVirtualDeletion(),setTimeout(function(){runVirtualDeletion()},70)},ReactInputState.prototype.addField=function(data){if(this.root){var field=data.field;if(!field.dataset.ignore){var name_6,validatorName,data=field.name,validators=[],actions={},conditional={},currency=null;for(name_6 in field.dataset)Object.hasOwn(field.dataset,name_6)&&(DatasetValidation.includes(name_6)?(validatorName=field.dataset[name_6])&&validators.push(validatorName):DatasetActions.includes(name_6)?actions[name_6]=field.dataset[name_6]:DatasetConditional.includes(name_6)?conditional[name_6]=field.dataset[name_6]:DatasetCurrency.includes(name_6)&&((currency=currency||{})[name_6]=field.dataset[name_6]));var errorElement=this.root.querySelector("[data-error-for="+data+"]"),errorElement=(errorElement&&(errorElement.style.display="none"),{name:data,validators:validators,field:field,actions:actions,errorElement:errorElement||null,transformers:field.dataset.transform?field.dataset.transform.split(","):[],remove:null!=(errorElement=field.dataset.remove)?errorElement:"",mask:null!=(errorElement=field.dataset.mask)?errorElement:"",touched:!1,regexValidation:null!=(errorElement=field.dataset.regexValidation)?errorElement:"",conditional:conditional,currency:currency});"radio"!=field.type?this.fields[data]=errorElement:(this.radios[data]||(this.radios[data]={}),this.radios[data]["".concat(field.value)]=errorElement),this.config.initialState&&data in this.config.initialState?this.setValue(data,this.config.initialState[data]):(field instanceof HTMLInputElement||field instanceof HTMLTextAreaElement||field instanceof HTMLSelectElement)&&(field instanceof HTMLInputElement&&"checkbox"==field.type?this.setValue(data,field.checked):field instanceof HTMLInputElement&&"radio"==field.type?field.checked&&this.setValue(data,field.value):field.value&&this.setValue(data,field.value))}}},ReactInputState.prototype.addEvents=function(){for(var fieldName in this.fields){var item=this.fields[fieldName];this.addChangeEvent(item),this.addTouchEvents(item)}for(var fieldName in this.radios)for(var radioValue in this.radios[fieldName]){item=this.radios[fieldName][radioValue];this.addChangeEvent(item),this.addTouchEvents(item)}},ReactInputState.prototype.addTouchEvents=function(item){function handler(event){item.touched=!0}function handlerBlur(event){item.touched=!0,_this.validate(item.name)}var _this=this,field=item.field;field.removeEventListener("focus",handler),field.addEventListener("focus",handler);field.removeEventListener("blur",handlerBlur),field.addEventListener("blur",handlerBlur)},ReactInputState.prototype.addChangeEvent=function(item){var _this=this,field=item.field,reloadOnChangeAction=null!=(_a=item.actions.reloadComponent)?_a:item.actions["reload-component"],_a=null,eventName=null;(eventName=field instanceof HTMLSelectElement?(_a=function(event){event=event.target.value;_this.state[item.name]=event,reloadOnChangeAction&&_this.reloader.reload(),_this.validate(item.name)},"change"):"checkbox"==field.type||"radio"==field.type?(_a=function(event){var event=event.target,value=event.value,event=event.checked;"radio"==field.type?_this.state[item.name]=value:"checkbox"==field.type&&(_this.state[item.name]=event),reloadOnChangeAction&&_this.reloader.reload(),_this.validate(item.name)},"change"):(_a=function(event){event=event.target.value;_this.state[item.name]=event,reloadOnChangeAction&&_this.reloader.reload(),_this.transform(item.name),_this.remove(item.name),_this.mask(item.name),_this.currency(item.name),_this.validate(item.name)},"input"))&&_a&&(field.removeEventListener(eventName,_a),field.addEventListener(eventName,_a))},ReactInputState.prototype.currency=function(name){if(!(name in this.fields))throw new Error('"'.concat(name,'" not found!'));var currency=this.fields[name].currency,value="".concat(this.state[name]).replace(/\D+/g,"");currency&&!isNumeric(value)?this.setValue(name,"","currency"):currency&&(currency=currencyFormat(this.state[name],null!=(value=currency.prefix)?value:"",currency.precision?Number(currency.precision):2,null!=(value=currency.decimalSeparator)?value:",",null!=(value=currency.groupSeparator)?value:"."),this.setValue(name,currency,"currency"))},ReactInputState.prototype.mask=function(name){if(!(name in this.fields))throw new Error('"'.concat(name,'" not found!'));var _a=this.fields[name],_a=_a.mask;_a&&"string"==typeof this.state[name]&&(_a=mask(this.state[name],_a),this.setValue(name,_a,"mask"))},ReactInputState.prototype.remove=function(name){if(!(name in this.fields))throw new Error('"'.concat(name,'" not found!'));var _a=this.fields[name],_a=_a.remove;_a&&"string"==typeof this.state[name]&&(_a=new RegExp(_a,"g"),_a=this.state[name].replace(_a,""),this.setValue(name,_a,"remove"))},ReactInputState.prototype.transform=function(name){var e_1,_a,e_2,_b;if(!(name in this.fields))throw new Error('"'.concat(name,'" not found!'));var _c=this.fields[name],transformers=_c.transformers,_c=_c.field;if((_c instanceof HTMLInputElement||_c instanceof HTMLTextAreaElement)&&this.state[name]&&"string"==typeof this.state[name])try{for(var transformers_1=__values(transformers),transformers_1_1=transformers_1.next();!transformers_1_1.done;transformers_1_1=transformers_1.next())switch(transformers_1_1.value){case"lowercase":var lowercase=this.state[name].toLowerCase();this.setValue(name,lowercase,"transform");break;case"uppercase":var uppercase=this.state[name].toUpperCase();this.setValue(name,uppercase,"transform");break;case"titlecase":var text=this.state[name].split(" "),titlecase=[];try{e_2=void 0;for(var text_1=__values(text),text_1_1=text_1.next();!text_1_1.done;text_1_1=text_1.next()){var word=text_1_1.value;titlecase.push(word.substring(0,1).toUpperCase()+word.substring(1))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{text_1_1&&!text_1_1.done&&(_b=text_1.return)&&_b.call(text_1)}finally{if(e_2)throw e_2.error}}var titleCaseJoined=titlecase.join(" ");this.setValue(name,titleCaseJoined,"transform");break;case"trim":var trimmed=this.state[name].trim();this.setValue(name,trimmed,"transform");break;case"urlsafe":var urlSafe=encodeURIComponent(this.state[name]);this.setValue(name,urlSafe,"transform")}}catch(e_1_1){e_1={error:e_1_1}}finally{try{transformers_1_1&&!transformers_1_1.done&&(_a=transformers_1.return)&&_a.call(transformers_1)}finally{if(e_1)throw e_1.error}}},ReactInputState.prototype.validate=function(name){var e_3,_a,_e;if(!(name in this.fields||name in this.radios))throw new Error('"'.concat(name,'" not found!'));if(this.validation[name]||(this.validation[name]={}),name in this.radios)for(var radioValue in this.radios[name]){if(this.radios[name][radioValue].field.required&&!"".concat(null!=(radioValue=this.state[name])?radioValue:"").trim().length){this.validation[name].required=!1;break}this.validation[name].required=!0}else{var _g=this.fields[name],validators=_g.validators,field=_g.field,regexValidation=_g.regexValidation,conditional=_g.conditional,value=(field.required&&("checkbox"!=field.type&&!"".concat(null!=(_g=this.state[name])?_g:"").trim().length||field instanceof HTMLInputElement&&"checkbox"==field.type&&!field.checked)?this.validation[name].required=!1:this.validation[name].required=!0,null!=(_g=this.state[name])?_g:"");if(validators)try{for(var validators_1=__values(validators),validators_1_1=validators_1.next();!validators_1_1.done;validators_1_1=validators_1.next()){var validatorName=validators_1_1.value;switch(validatorName){case"email":validator.isEmail(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"cpf":isCpf(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"cnpj":isCnpj(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"bic_swift":validator.isBIC(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"btc":validator.isBtcAddress(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"credit_card":validator.isCreditCard(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"ean":validator.isEAN(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"iban":validator.isIBAN(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"imei":validator.isIMEI(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"json":validator.isJSON(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"magnet_uri":validator.isMagnetURI(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"numeric":validator.isNumeric(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"octal":validator.isOctal(value)?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1;break;case"strong_password":validator.isStrongPassword(value,{minLength:7})?this.validation[name][validatorName]=!0:this.validation[name][validatorName]=!1}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{validators_1_1&&!validators_1_1.done&&(_a=validators_1.return)&&_a.call(validators_1)}finally{if(e_3)throw e_3.error}}if(regexValidation&&(field=new RegExp(regexValidation,"g").test(value),this.validation[name].regex=!!field),conditional)for(var conditionName in conditional){var conditionValue=null!=(_e=conditional[conditionName])?_e:"",conditionNumValue=Number(null!=(_e=conditional[conditionName])?_e:"0"),numValue=Number(null!=value?value:"0");switch(conditionName){case"equals":this.validation[name].equals=value==conditionValue;break;case"greaterOrEqual":this.validation[name].greaterOrEqual=conditionNumValue<=numValue;break;case"greaterThan":this.validation[name].greaterThan=conditionNumValue<numValue;break;case"lessOrEqual":this.validation[name].lessOrEqual=numValue<=conditionNumValue;break;case"lessThan":this.validation[name].lessThan=numValue<conditionNumValue;break;case"notEquals":this.validation[name].notEquals=value!=conditionValue}}}this.displayError()},ReactInputState.prototype.displayError=function(){function handleErrorElement(errorElement,touched,isValid){errorElement&&errorElement.style&&touched&&!isValid?(errorElement.style.display="",_this.config&&_this.config.closeErrorMessageMilliseconds&&(_this.errorCloseTimeout&&clearTimeout(_this.errorCloseTimeout),_this.errorCloseTimeout=setTimeout(function(){errorElement.style.display="none"},_this.config.closeErrorMessageMilliseconds))):errorElement&&errorElement.style&&(errorElement.style.display="none")}var name_7,submitButton,_this=this,disableSubmitButton=!1;for(name_7 in this.validation){var validationType=this.validation[name_7];if(name_7 in this.radios){var someKey=Object.keys(this.radios[name_7])[0],someKey=this.radios[name_7][someKey],errorElement=someKey.errorElement,touched=someKey.touched,field=someKey.field;handleErrorElement(errorElement,!0,isValid=null==(someKey=this.validation[name_7])?void 0:someKey.required),isValid||(disableSubmitButton=!0)}else for(var validationTypeName in validationType){var isValid=this.validation[name_7][validationTypeName],_e=this.fields[name_7],errorElement=_e.errorElement,touched=_e.touched,field=_e.field;isValid||(disableSubmitButton=!0),this.config&&this.config.onValidate&&this.config.onValidate(name_7,isValid,validationTypeName),touched&&!isValid&&(field instanceof HTMLInputElement||field instanceof HTMLTextAreaElement)&&this.config&&this.config.invalidClasses&&field.classList&&field.classList.length?(_e=field.classList).add.apply(_e,__spreadArray([],__read(this.config.invalidClasses.split(" ")),!1)):touched&&isValid&&(field instanceof HTMLInputElement||field instanceof HTMLTextAreaElement)&&this.config&&this.config.invalidClasses&&field.classList&&field.classList.length&&(validationTypeName=field.classList).remove.apply(validationTypeName,__spreadArray([],__read(this.config.invalidClasses.split(" ")),!1)),handleErrorElement(errorElement,touched,isValid)}}disableSubmitButton&&this.config&&this.config.submitButton&&this.config.submitButton.current?(submitButton=this.config.submitButton.current)instanceof HTMLButtonElement?submitButton.setAttribute("disabled","disabled"):(submitButton.style.pointerEvents="none",submitButton.style.cursor="default"):this.config&&this.config.submitButton&&this.config.submitButton.current&&((submitButton=this.config.submitButton.current)instanceof HTMLButtonElement?submitButton.removeAttribute("disabled"):(submitButton.style.pointerEvents="",submitButton.style.cursor=""))},ReactInputState.prototype.validateAll=function(){for(var name_8 in this.fields)this.validate(name_8);for(var name_9 in this.radios)this.validate(name_9)},Object.defineProperty(ReactInputState.prototype,"isValid",{get:function(){for(var name_10 in this.fields)for(var validationName in this.validation[name_10])if(!this.validation[name_10][validationName])return!1;return!0},enumerable:!1,configurable:!0}),ReactInputState.prototype.setValue=function(name,value,origin){var _a,setTheValue,field,_this=this,isInRadio=name in this.radios;name in this.fields||isInRadio?(field=name in this.radios?null==(_a=this.radios[name]["".concat(value)])?void 0:_a.field:this.fields[name].field)&&((setTheValue=function(){field instanceof HTMLInputElement?"checkbox"==field.type?(_this.state[name]=Boolean(value),field.checked=Boolean(value)):"radio"==field.type?(_this.state[name]=value,field.checked=!0):(_this.state[name]=value,field.value=value):(_this.state[name]=value,field.value=value),origin||isInRadio||(_this.transform(name),_this.remove(name),_this.mask(name),_this.currency(name)),_this.validate(name)})(),setTimeout(function(){setTheValue()},50)):this.config.setVirtualIfNotExists&&this.setVirtual(name,value)},ReactInputState.prototype.setVirtual=function(name,value,isPrivate){var _this=this;void 0===isPrivate&&(isPrivate=!1),this._virtual[name]={value:value,private:isPrivate},setTimeout(function(){_this._virtual[name]={value:value,private:isPrivate}},50)},ReactInputState.prototype.init=function(root,config){for(var _this=this,inputFields=(this._config=config,(this.root=root).getElementsByTagName("input")),selectFields=root.getElementsByTagName("select"),textareaFields=root.getElementsByTagName("textarea"),x=0;x<inputFields.length;x++){var field=inputFields[x];if(!field.name&&!field.dataset.ignore)throw new Error('"name" attribute has not been found in field!');this.addField({type:"input",field:field})}for(x=0;x<selectFields.length;x++){var select=selectFields[x];if(!select.name&&!select.dataset.ignore)throw new Error('"name" attribute has not been found in field!');this.addField({type:"select",field:select})}for(x=0;x<textareaFields.length;x++){var textarea=textareaFields[x];if(!textarea.name&&!textarea.dataset.ignore)throw new Error('"name" attribute has not been found in field!');this.addField({type:"textarea",field:textarea})}this.addEvents(),this.validateAll();var mutationsQueue=[],searchRemovedFields=function(node){var e_4,_a;if(node instanceof HTMLInputElement||node instanceof HTMLTextAreaElement||node instanceof HTMLSelectElement)++_this.fieldsChanged;else try{for(var _b=__values(node.childNodes),_c=_b.next();!_c.done;_c=_b.next()){var domNode=_c.value;searchRemovedFields(domNode)}}catch(e_4_1){e_4={error:e_4_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_4)throw e_4.error}}},checkAddedFields=function(node){var e_5,_a;if(node instanceof HTMLInputElement||node instanceof HTMLTextAreaElement||node instanceof HTMLSelectElement)++_this.fieldsChanged;else try{for(var _b=__values(node.childNodes),_c=_b.next();!_c.done;_c=_b.next()){var domNode=_c.value;searchRemovedFields(domNode)}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_5)throw e_5.error}}},processQueue=function(){return __awaiter(_this,void 0,void 0,function(){var currentQueue,currentQueue_1,currentQueue_1_1,mutation,_a,_b,_c,_d,node,e_6,_e,e_7,_f,e_8,_g;return __generator(this,function(_h){if(mutationsQueue.length){currentQueue=mutationsQueue[0];try{for(currentQueue_1=__values(currentQueue),currentQueue_1_1=currentQueue_1.next();!currentQueue_1_1.done;currentQueue_1_1=currentQueue_1.next()){mutation=currentQueue_1_1.value;try{for(e_7=void 0,_a=__values(mutation.removedNodes),_b=_a.next();!_b.done;_b=_a.next())node=_b.value,searchRemovedFields(node)}catch(e_7_1){e_7={error:e_7_1}}finally{try{_b&&!_b.done&&(_f=_a.return)&&_f.call(_a)}finally{if(e_7)throw e_7.error}}if(mutation.addedNodes.length)try{for(e_8=void 0,_c=__values(mutation.addedNodes),_d=_c.next();!_d.done;_d=_c.next())node=_d.value,checkAddedFields(node)}catch(e_8_1){e_8={error:e_8_1}}finally{try{_d&&!_d.done&&(_g=_c.return)&&_g.call(_c)}finally{if(e_8)throw e_8.error}}}}catch(e_6_1){e_6={error:e_6_1}}finally{try{currentQueue_1_1&&!currentQueue_1_1.done&&(_e=currentQueue_1.return)&&_e.call(currentQueue_1)}finally{if(e_6)throw e_6.error}}mutationsQueue.shift(),this.fieldsChanged&&!mutationsQueue.length&&(this.fieldsChanged=0,observer.disconnect(),this.reboot()),mutationsQueue.length&&processQueue()}return[2]})})},observer=new MutationObserver(function(mutations,observer){mutationsQueue.length?mutationsQueue.push(mutations):(mutationsQueue.push(mutations),processQueue())});observer.observe(this.root,{childList:!0,subtree:!0})},ReactInputState.prototype.reboot=function(){this.fields={},this.validation={},this.root&&this.init(this.root,this._config)},Object.defineProperty(ReactInputState.prototype,"rootNode",{get:function(){return this.root},enumerable:!1,configurable:!0}),ReactInputState.prototype.disableSubmitButton=function(){var submitButton;this.config.submitButton&&this.config.submitButton.current&&((submitButton=this.config.submitButton.current)instanceof HTMLButtonElement?submitButton.setAttribute("disabled","disabled"):(submitButton.style.pointerEvents="none",submitButton.style.cursor="default"))},ReactInputState.prototype.enableSubmitButton=function(){var submitButton;this.config.submitButton&&this.config.submitButton.current&&((submitButton=this.config.submitButton.current)instanceof HTMLButtonElement?submitButton.removeAttribute("disabled"):(submitButton.style.pointerEvents="",submitButton.style.cursor=""))},ReactInputState})();export default function useInputState(ref,config,deps){void 0===deps&&(deps=[]);var reloader=useReloader(),_a=__read(React.useState(new ReactInputState(reloader,config)),2),savedState=_a[0];return React.useEffect(function(){ref.current&&savedState.init(ref.current,config)},__spreadArray(__spreadArray([],__read(deps),!1),[config],!1)),[savedState,reloader]}export{ReactInputStateConfig};